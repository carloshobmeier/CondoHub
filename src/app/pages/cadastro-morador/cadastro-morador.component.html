<app-menu></app-menu>

<div class="container-fluid">
    <div class="row">
        <div class="container cadastro mt-3">
            <h2 class="mb-4 titulo">Cadastro de moradores</h2>
            <form id="cadastroMorador" (ngSubmit)="onSubmit()">
                <div class="row">
                    <div class="container col-sm-4">
                        <div class="form-group">
                            <label for="nomeMorador">Nome:</label>
                            <input type="text" class="form-control" id="nomeMorador" name="nomeMorador" [(ngModel)]="cadastroMorador.nome" required>
                        </div>
                        <div class="form-group">
                            <label for="andar">Andar:</label>
                            <input type="number" class="form-control" id="andar" name="andar" [(ngModel)]="cadastroMorador.andar" required>
                        </div>
                        <div class="form-group">
                            <label for="numeroApartamento">Número do Apartamento:</label>
                            <input type="number" class="form-control" id="numeroApartamento" name="numeroApartamento" [(ngModel)]="cadastroMorador.numeroApto" required>
                        </div>
                        <div class="form-group">
                            <label for="vagasGaragem">Vagas de Garagem:</label>
                            <input type="number" class="form-control" id="vagasGaragem" name="vagasGaragem" [(ngModel)]="cadastroMorador.vagasGaragem" required>
                        </div>
                    </div>
                    <div class="container col-sm-4">
                        <div class="form-group">
                            <label for="email">Email:</label>
                            <input type="email" class="form-control" id="email" name="email" [(ngModel)]="cadastroMorador.email" required>
                        </div>
                        <div class="form-group">
                            <label for="dataNascimento">Data de Nascimento:</label>
                            <input type="date" class="form-control" id="dataNascimento" name="dataNascimento" [(ngModel)]="cadastroMorador.dataNascimento" required>
                        </div>
                        <div class="form-group">
                            <label for="status">Status</label>
                            <input type="text" class="form-control" id="status" name="status" [(ngModel)]="cadastroMorador.status" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Cadastrar</button>
                    </div>
                    <div class="col-sm-4 imagem">
                        <img src="../../../assets/cadastroMoradores.jpg" width="100%" alt="">
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!--LISTAR, EDITAR E DELETAR MORADOR-->
<div class="row mt-5">
    <div class="container-fluid">
        <h2 class="mb-4 titulo">Lista de moradores</h2>
        <div class="form-group">
            <label for="search">Pesquisar:</label>
            <input type="text" class="form-control" id="search" placeholder="Digite para pesquisar...">
        </div>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Nome</th>
                    <th>Andar</th>
                    <th>Número do Apartamento</th>
                    <th>Vagas de Garagem</th>
                    <th>Email</th>
                    <th>Data de Nascimento</th>
                    <th>Status</th>
                    <th>Opções</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let morador of cadastroMoradores">
                    <ng-container *ngIf="moradorEmEdicao?.id === morador.id; else readMode">
                        <td>
                            <input [(ngModel)]="morador.id" placeholder="Id" name="id" disabled>
                        </td>
                        <td>
                            <input [(ngModel)]="morador.nome" placeholder="Nome" name="nomeEmEdicao">
                        </td>
                        <td>
                            <input [(ngModel)]="morador.andar" type="number" placeholder="Andar" name="andarEmEdicao">
                        </td>
                        <td>
                            <input [(ngModel)]="morador.numeroApto" type="number" placeholder="Número do Apartamento" name="numeroAptoEmEdicao">
                        </td>
                        <td>
                            <input [(ngModel)]="morador.vagasGaragem" type="number" placeholder="Vagas de Garagem" name="vagasGaragemEmEdicao">
                        </td>
                        <td>
                            <input [(ngModel)]="morador.email" type="email" placeholder="Email" name="emailEmEdicao">
                        </td>
                        <td>
                            <input [(ngModel)]="morador.dataNascimento" type="date" placeholder="Data de Nascimento" name="dataNascimentoEmEdicao">
                        </td>
                        <td>
                            <input [(ngModel)]="morador.status" placeholder="Status" name="statusEmEdicao">
                        </td>
                        <td>
                            <button class="btn btn-success btn-sm" (click)="onSave(morador)">Salvar</button>
                            <button class="btn btn-secondary btn-sm" (click)="onCancel()">Cancelar</button>
                        </td>
                    </ng-container>
                    <ng-template #readMode>
                        <td>{{ morador.id }}</td>
                        <td>{{ morador.nome }}</td>
                        <td>{{ morador.andar }}</td>
                        <td>{{ morador.numeroApto }}</td>
                        <td>{{ morador.vagasGaragem }}</td>
                        <td>{{ morador.email }}</td>
                        <td>{{ morador.dataNascimento }}</td>
                        <td>{{ morador.status }}</td>
                        <td>
                            <button class="btn btn-warning btn-sm" (click)="onEdit(morador)">Editar</button>
                            <button class="btn btn-danger btn-sm" (click)="onDelete(morador)">Deletar</button>
                        </td>
                    </ng-template>
                </tr>
            </tbody>
        </table>
    </div>
</div>




